diff --git a/var/spack/repos/builtin/packages/numactl/package.py b/var/spack/repos/builtin/packages/numactl/package.py
index f6c82f5522..d0fe04e53e 100644
--- a/var/spack/repos/builtin/packages/numactl/package.py
+++ b/var/spack/repos/builtin/packages/numactl/package.py
@@ -30,6 +30,7 @@ class Numactl(AutotoolsPackage):
 
     def autoreconf(self, spec, prefix):
         bash = which('bash')
+        bash('libtoolize')
         bash('./autogen.sh')
 
     def patch(self):
diff --git a/var/spack/repos/builtin/packages/yoda/package.py b/var/spack/repos/builtin/packages/yoda/package.py
index 45ae109040..69841e5da3 100644
--- a/var/spack/repos/builtin/packages/yoda/package.py
+++ b/var/spack/repos/builtin/packages/yoda/package.py
@@ -63,6 +63,7 @@ class Yoda(AutotoolsPackage):
 
     depends_on('python', type=('build', 'run'))
     depends_on('py-future', type=('build', 'run'))
+    depends_on('zlib')
     depends_on('boost', when='@:1.6.0', type=('build', 'run'))
     depends_on('py-cython@0.18:', type='build', when='@:1.4.0')
     depends_on('py-cython@0.20:', type='build', when='@1.4.0:1.6.5')
diff --git a/var/spack/repos/builtin/packages/emacs/glibc-2.34.patch b/var/spack/repos/builtin/packages/emacs/glibc-2.34.patch
new file mode 100644
index 0000000000..793503db5a
--- /dev/null
+++ b/var/spack/repos/builtin/packages/emacs/glibc-2.34.patch
@@ -0,0 +1,20 @@
+Fix compilation with glibc-2.34
+https://bugs.gentoo.org/803644
+
+In glibc-2.34, definition of SIGSTKSZ has changed from a fixed value
+to sysconf(_SC_SIGSTKSZ), which cannot be used in the definition of a
+static array. In 2.33, the default SIGSTKSZ was 8192, but apparently
+some arches (e.g. aarch64 and sparc) used 16384. Hardcode the larger
+of these values.
+
+--- emacs-27.2/src/sysdep.c
++++ emacs-27.2/src/sysdep.c
+@@ -1818,7 +1818,7 @@
+ 
+ /* Alternate stack used by SIGSEGV handler below.  */
+ 
+-static unsigned char sigsegv_stack[SIGSTKSZ];
++static unsigned char sigsegv_stack[16384];
+ 
+ 
+ /* Return true if SIGINFO indicates a stack overflow.  */
diff --git a/var/spack/repos/builtin/packages/emacs/package.py b/var/spack/repos/builtin/packages/emacs/package.py
index a45d726fd0..c9d708e194 100644
--- a/var/spack/repos/builtin/packages/emacs/package.py
+++ b/var/spack/repos/builtin/packages/emacs/package.py
@@ -61,6 +61,8 @@ class Emacs(AutotoolsPackage, GNUMirrorPackage):
     conflicts('@:26.3', when='platform=darwin os=catalina')
     conflicts('+native', when='@:27', msg="native compilation require @master")
 
+    patch('glibc-2.34.patch')
+
     @when('platform=darwin')
     def setup_build_environment(self, env):
         # on macOS, emacs' config does search hard enough for ncurses'
diff --git a/var/spack/repos/builtin/packages/whizard/package.py b/var/spack/repos/builtin/packages/whizard/package.py
index 883a18c983..f4ef68b674 100644
--- a/var/spack/repos/builtin/packages/whizard/package.py
+++ b/var/spack/repos/builtin/packages/whizard/package.py
@@ -58,6 +58,7 @@ class Whizard(AutotoolsPackage):
     variant('latex', default=False,
             description="data visualization with latex")
 
+    depends_on('libtirpc')
     depends_on('ocaml@4.02.3:', type='build', when="@3:")
     depends_on('ocaml@4.02.3:~force-safe-string', type='build', when="@:2")
     depends_on('hepmc', when="hepmc=2")
diff --git a/var/spack/repos/builtin/packages/madgraph5amc/array-bounds.patch b/var/spack/repos/builtin/packages/madgraph5amc/array-bounds.patch
new file mode 100644
index 0000000000..279e359580
--- /dev/null
+++ b/var/spack/repos/builtin/packages/madgraph5amc/array-bounds.patch
@@ -0,0 +1,124 @@
+diff --git a/vendor/CutTools/src/qcdloop/aaxex.f b/vendor/CutTools/src/qcdloop/aaxex.f
+index 3b1a723..279771c 100644
+--- a/vendor/CutTools/src/qcdloop/aaxex.f
++++ b/vendor/CutTools/src/qcdloop/aaxex.f
+@@ -239,7 +239,7 @@
+ *
+ *	local variables
+ *
+-	integer i,j,ier0,ier1,ij2k(4,4),m2ijk(3,20)
++	integer i,j,ier0,ier1,ij2k(4,4),m2ijk(3,35)
+ 	DOUBLE PRECISION xi5(10),f1,f2,f3,f4,absc
+         DOUBLE COMPLEX R(70),cd0i(5),cd1ij(3,5),ce2ij(4,4),ce3ijk(4,4,4)
+      +		,cd2ijk(3,3,5),cd2i(5),cxy(70),cc,rg(4),cexj(39)
+@@ -271,7 +271,15 @@
+      +		    3,3,4,  4,4,1,
+      +		    4,4,2,  4,4,3,
+      +		    1,2,3,  1,2,4,
+-     +		    1,3,4,  2,3,4/
++     +		    1,3,4,  2,3,4,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0/
+ *
+ *  #] declarations:
+ *  #[ kinematical quatities for 5pv-red:
+diff --git a/vendor/IREGI/src/qcdloop/ff/aaxex.f b/vendor/IREGI/src/qcdloop/ff/aaxex.f
+index 3b1a723..279771c 100644
+--- a/vendor/IREGI/src/qcdloop/ff/aaxex.f
++++ b/vendor/IREGI/src/qcdloop/ff/aaxex.f
+@@ -239,7 +239,7 @@
+ *
+ *	local variables
+ *
+-	integer i,j,ier0,ier1,ij2k(4,4),m2ijk(3,20)
++	integer i,j,ier0,ier1,ij2k(4,4),m2ijk(3,35)
+ 	DOUBLE PRECISION xi5(10),f1,f2,f3,f4,absc
+         DOUBLE COMPLEX R(70),cd0i(5),cd1ij(3,5),ce2ij(4,4),ce3ijk(4,4,4)
+      +		,cd2ijk(3,3,5),cd2i(5),cxy(70),cc,rg(4),cexj(39)
+@@ -271,7 +271,15 @@
+      +		    3,3,4,  4,4,1,
+      +		    4,4,2,  4,4,3,
+      +		    1,2,3,  1,2,4,
+-     +		    1,3,4,  2,3,4/
++     +		    1,3,4,  2,3,4,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0,  0,0,0,
++     +              0,0,0/
+ *
+ *  #] declarations:
+ *  #[ kinematical quatities for 5pv-red:
+diff --git a/vendor/CutTools/src/qcdloop/ffxd0p.f b/vendor/CutTools/src/qcdloop/ffxd0p.f
+index 4805434..38ee638 100644
+--- a/vendor/CutTools/src/qcdloop/ffxd0p.f
++++ b/vendor/CutTools/src/qcdloop/ffxd0p.f
+@@ -33,7 +33,7 @@
+ *	arguments
+ *
+ 	DOUBLE COMPLEX cs4(175),cfac
+-	integer ipi12(26),isoort(16),ier
++	integer ipi12(27),isoort(16),ier
+ 	logical ldel2s
+ 	DOUBLE PRECISION xpi(10),dpipj(10,10),piDpj(10,10),
+      +		xqi(10),dqiqj(10,10),qiDqj(10,10),ai(4),daiaj(4,4)
+diff --git a/vendor/IREGI/src/qcdloop/ff/ffxd0p.f b/vendor/IREGI/src/qcdloop/ff/ffxd0p.f
+index 4805434..38ee638 100644
+--- a/vendor/IREGI/src/qcdloop/ff/ffxd0p.f
++++ b/vendor/IREGI/src/qcdloop/ff/ffxd0p.f
+@@ -33,7 +33,7 @@
+ *	arguments
+ *
+ 	DOUBLE COMPLEX cs4(175),cfac
+-	integer ipi12(26),isoort(16),ier
++	integer ipi12(27),isoort(16),ier
+ 	logical ldel2s
+ 	DOUBLE PRECISION xpi(10),dpipj(10,10),piDpj(10,10),
+      +		xqi(10),dqiqj(10,10),qiDqj(10,10),ai(4),daiaj(4,4)
+diff --git a/vendor/StdHEP/src/stdhep/GNUmakefile b/vendor/StdHEP/src/stdhep/GNUmakefile
+index 4abfa76..a29fdfb 100644
+--- a/vendor/StdHEP/src/stdhep/GNUmakefile
++++ b/vendor/StdHEP/src/stdhep/GNUmakefile
+@@ -6,7 +6,7 @@ include ../stdhep_arch
+ STDHEP_DIR = ../..
+ 
+ #this has been added by MZ
+-FFLAGS+= -fd-lines-as-code
++FFLAGS+= -fd-lines-as-code -std=legacy -fcommon
+ 
+ SLIB = $(STDHEP_DIR)/lib
+ SBIN = $(STDHEP_DIR)/bin
+diff --git a/vendor/StdHEP/mcfio/src/GNUmakefile b/vendor/StdHEP/mcfio/src/GNUmakefile
+index a818e5e..472baa3 100644
+--- a/vendor/StdHEP/mcfio/src/GNUmakefile
++++ b/vendor/StdHEP/mcfio/src/GNUmakefile
+@@ -20,6 +20,7 @@ ifdef HISTO_DIR
+    CINC += -I$(HISTO_DIR)/include
+    HLIB += $(HISTO_DIR)/lib/libCHisto.a
+ endif
++CFLAGS += -fcommon
+ 
+ CL_F_SRC    = mcfio_FPrintDictionary \
+                mcf_evt_xdr mcfio_FBinding mcfio_Util1 \
+diff --git a/vendor/StdHEP/src/stdhep/GNUmakefile b/vendor/StdHEP/src/stdhep/GNUmakefile
+index 737b941..6d2660b 100644
+--- a/vendor/StdHEP/src/stdhep/GNUmakefile
++++ b/vendor/StdHEP/src/stdhep/GNUmakefile
+@@ -15,7 +15,7 @@ SINC = $(STDHEP_DIR)/src/inc
+ INCS = -I$(SINC) -I$(STDHEP_DIR)/mcfio/src \
+        -I$(SINC)/isajet -I$(SINC)/pythia -I$(SINC)/herwig \
+        -I$(SINC)/qq -I$(SINC)/dpm
+-CFLAGS += -I$(SINC) -I$(STDHEP_DIR)/mcfio/src
++CFLAGS += -I$(SINC) -I$(STDHEP_DIR)/mcfio/src -fcommon
+ CPPFLGS = $(KPPFLAGS) $(INCS)
+ 
+ FOBJS =	$(patsubst %.F,%$(SFX).o,$(wildcard *.F))
diff --git a/var/spack/repos/builtin/packages/madgraph5amc/package.py b/var/spack/repos/builtin/packages/madgraph5amc/package.py
index d4c8653bd6..fcfcbc1f8e 100644
--- a/var/spack/repos/builtin/packages/madgraph5amc/package.py
+++ b/var/spack/repos/builtin/packages/madgraph5amc/package.py
@@ -48,7 +48,9 @@ class Madgraph5amc(Package):
     depends_on('python@2.7.0:2.8.0', when='@2.7.3.py2', type=('build', 'run'))
     depends_on('python@3.7:', when='@2.7.3.py3', type=('build', 'run'))
     depends_on('python@2.7.0:2.8.0,3.7:', when='@2.8.0:', type=('build', 'run'))
+    depends_on('libtirpc')
 
+    patch('array-bounds.patch')
     patch('madgraph5amc.patch', level=0)
     patch('madgraph5amc-2.7.3.atlas.patch', level=0, when='@2.7.3.py2+atlas')
     patch('madgraph5amc-2.7.3.atlas.patch', level=0, when='@2.7.3.py3+atlas')
diff --git a/var/spack/repos/builtin/packages/herwig3/package.py b/var/spack/repos/builtin/packages/herwig3/package.py
index f80eb4d46a..d6f5f68159 100644
--- a/var/spack/repos/builtin/packages/herwig3/package.py
+++ b/var/spack/repos/builtin/packages/herwig3/package.py
@@ -16,14 +16,15 @@ class Herwig3(AutotoolsPackage):
 
     tags = ['hep']
 
+    version('7.2.2', sha256='53e06b386df5bc20fe268b6c8ba50f1e62b6744e577d383ec836ea3fc672c383')
     version('7.2.1', sha256='d4fff32f21c5c08a4b2e563c476b079859c2c8e3b78d853a8a60da96d5eea686')
 
     depends_on('autoconf', type='build')
     depends_on('automake', type='build')
     depends_on('libtool',  type='build')
     depends_on('m4',       type='build')
-    depends_on('lhapdf',   type='link')
-    depends_on('thepeg@2.2.1', when='@7.2.1', type='link')
+    depends_on('lhapdf')
+    depends_on('thepeg@2.2.1', when='@7.2.1:', type='link')
     depends_on('boost', type='link')
     depends_on('python', type=('build', 'run'))
     depends_on('gsl', type='link')
