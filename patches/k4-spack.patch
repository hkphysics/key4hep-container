diff --git a/packages/fcalclusterer/package.py b/packages/fcalclusterer/package.py
index 5e90a61..3e9be29 100644
--- a/packages/fcalclusterer/package.py
+++ b/packages/fcalclusterer/package.py
@@ -29,6 +29,7 @@ class Fcalclusterer(CMakePackage):
 
     # CMAKE_INSTALL_PREFIX is overwritten by the package
     patch("install.patch", when="@:1.0.1")
+    patch("urng-static-constexpr.patch")
 
     def cmake_args(self):
         args = []
diff --git a/packages/fcalclusterer/urng-static-constexpr.patch b/packages/fcalclusterer/urng-static-constexpr.patch
new file mode 100755
index 0000000..bf184e8
--- /dev/null
+++ b/packages/fcalclusterer/urng-static-constexpr.patch
@@ -0,0 +1,23 @@
+diff --git a/source/BeamCalReco/src/BeamCalBkgPregen.cpp b/source/BeamCalReco/src/BeamCalBkgPregen.cpp
+index ac5d1ac..635bbf5 100644
+--- a/source/BeamCalReco/src/BeamCalBkgPregen.cpp
++++ b/source/BeamCalReco/src/BeamCalBkgPregen.cpp
+@@ -29,6 +29,7 @@
+ #include <map>
+ #include <set>
+ #include <stdexcept>
++#include <random>
+ 
+ using std::vector;
+ using std::string;
+@@ -43,8 +44,8 @@ public:
+   Random3_URBG() = delete;
+   explicit Random3_URBG(TRandom3 * const random3): r3(random3) {}
+   UInt_t operator()() { return r3->Integer(kMaxUInt); }
+-  constexpr UInt_t min() { return 0; }
+-  constexpr UInt_t max() { return kMaxUInt-1; }
++  static constexpr UInt_t min() { return 0; }
++  static constexpr UInt_t max() { return kMaxUInt-1; }
+ };
+ 
+ BeamCalBkgPregen::BeamCalBkgPregen(const string& bg_method_name, const BeamCalGeo* BCG)
diff --git a/packages/key4hep-stack/package.py b/packages/key4hep-stack/package.py
index b7ceadd..e0b45c9 100644
--- a/packages/key4hep-stack/package.py
+++ b/packages/key4hep-stack/package.py
@@ -73,8 +73,11 @@ class Key4hepStack(BundlePackage):
     depends_on("podio@0.12.0", when="@0.1")
 
     # be explicit to avoid concretizer errors
-    depends_on('root cxxstd=17 +root7 +ssl')
+    # lcfiplus requires root variant +tmva, but spec asked for ~tmva
+    depends_on('root@6.22.0: cxxstd=17 +root7 +ssl +tmva +mlp')
     depends_on('boost +python')
+    # gaudi needs 3.7.99
+    depends_on('python@:3.7.99')
 
     conflicts("%gcc@8.3.1",
               msg="There are known issues with compilers from redhat's devtoolsets" \
diff --git a/packages/lccontent/bool-int.patch b/packages/lccontent/bool-int.patch
new file mode 100644
index 0000000..d7a62d7
--- /dev/null
+++ b/packages/lccontent/bool-int.patch
@@ -0,0 +1,35 @@
+diff --git a/include/LCUtility/KDTreeLinkerAlgoT.h b/include/LCUtility/KDTreeLinkerAlgoT.h
+index 896d946..6e50819 100644
+--- a/include/LCUtility/KDTreeLinkerAlgoT.h
++++ b/include/LCUtility/KDTreeLinkerAlgoT.h
+@@ -272,7 +272,7 @@ inline void KDTreeLinkerAlgo<DATA, DIM>::recSearch(const KDTreeNodeT<DATA, DIM>
+         for (unsigned i = 0; i < DIM; ++i)
+         {
+             const auto thedim = current->info.dims[i];
+-            isInside *= thedim >= trackBox.dimmin[i] && thedim <= trackBox.dimmax[i];
++            isInside = isInside && thedim >= trackBox.dimmin[i] && thedim <= trackBox.dimmax[i];
+         }
+ 
+         if (isInside)
+@@ -289,8 +289,8 @@ inline void KDTreeLinkerAlgo<DATA, DIM>::recSearch(const KDTreeNodeT<DATA, DIM>
+         {
+             const auto regionmin = current->left->region.dimmin[i];
+             const auto regionmax = current->left->region.dimmax[i];
+-            isFullyContained *= (regionmin >= trackBox.dimmin[i] && regionmax <= trackBox.dimmax[i]);
+-            hasIntersection *= (regionmin < trackBox.dimmax[i] && regionmax > trackBox.dimmin[i]);
++            isFullyContained = isFullyContained && (regionmin >= trackBox.dimmin[i] && regionmax <= trackBox.dimmax[i]);
++            hasIntersection = hasIntersection && (regionmin < trackBox.dimmax[i] && regionmax > trackBox.dimmin[i]);
+         }
+ 
+         if (isFullyContained)
+@@ -310,8 +310,8 @@ inline void KDTreeLinkerAlgo<DATA, DIM>::recSearch(const KDTreeNodeT<DATA, DIM>
+         {
+             const auto regionmin = current->right->region.dimmin[i];
+             const auto regionmax = current->right->region.dimmax[i];
+-            isFullyContained *= (regionmin >= trackBox.dimmin[i] && regionmax <= trackBox.dimmax[i]);
+-            hasIntersection *= (regionmin < trackBox.dimmax[i] && regionmax > trackBox.dimmin[i]);
++            isFullyContained = isFullyContained && (regionmin >= trackBox.dimmin[i] && regionmax <= trackBox.dimmax[i]);
++            hasIntersection = hasIntersection && (regionmin < trackBox.dimmax[i] && regionmax > trackBox.dimmin[i]);
+         }
+ 
+         if (isFullyContained)
diff --git a/packages/lccontent/package.py b/packages/lccontent/package.py
index 619a2dc..8da70e6 100644
--- a/packages/lccontent/package.py
+++ b/packages/lccontent/package.py
@@ -23,14 +23,18 @@ class Lccontent(CMakePackage):
     patch("path2.patch")
     patch("path3.patch")
     patch("path4.patch")
+    patch("bool-int.patch")
 
     depends_on("pandorapfa")
     depends_on("pandorasdk")
 
     def cmake_args(self):
         args = [
-                '-DCMAKE_MODULE_PATH=%s' % self.spec["pandorapfa"].prefix.cmakemodules,
-                "-DCMAKE_CXX_FLAGS=-std=c++17"]
+                '-DCMAKE_CXX_STANDARD=17',
+                '-DCMAKE_MODULE_PATH=%s' % self.spec["pandorapfa"].prefix.cmakemodules
+        ]
+        if self.spec.satisfies('%gcc@10:'):
+            args.append('-DCMAKE_CXX_FLAGS=-Wno-int-in-bool-context')
         return args
 
     def url_for_version(self, version):
