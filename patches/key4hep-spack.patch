diff --git a/packages/lccontent/package.py b/packages/lccontent/package.py
index 0161946..f7f47cd 100644
--- a/packages/lccontent/package.py
+++ b/packages/lccontent/package.py
@@ -36,6 +36,8 @@ class Lccontent(CMakePackage):
                 '-DCMAKE_CXX_STANDARD=17',
                 '-DCMAKE_MODULE_PATH=%s' % self.spec["pandorapfa"].prefix.cmakemodules
         ]
+        if self.spec.satisfies('%clang'):
+            args.append('-DCMAKE_CXX_FLAGS=-Wno-error')
         return args
 
     def url_for_version(self, version):
diff --git a/packages/fccanalyses/package.py b/packages/fccanalyses/package.py
index efdc97e..b968ba2 100644
--- a/packages/fccanalyses/package.py
+++ b/packages/fccanalyses/package.py
@@ -32,8 +32,9 @@ class Fccanalyses(CMakePackage, Key4hepPackage):
       spack_env.prepend_path('CPATH', self.spec['edm4hep'].prefix.include)
       spack_env.prepend_path('CPATH', self.spec['podio'].prefix.include)
       spack_env.prepend_path('CPATH', self.spec['fastjet'].prefix.include)
-      spack_env.prepend_path('CPATH', self.spec['acts'].prefix.include)
-      spack_env.prepend_path('CPATH', self.spec['eigen'].prefix.include)
+      if self.spec.satisfies("@0.3.0:"):
+        spack_env.prepend_path('CPATH', self.spec['acts'].prefix.include)
+        spack_env.prepend_path('CPATH', self.spec['eigen'].prefix.include)
 
     def setup_run_environment(self, spack_env):
       spack_env.prepend_path('ROOT_INCLUDE_PATH', self.prefix.include.FCCAnalyses)
@@ -41,3 +42,9 @@ class Fccanalyses(CMakePackage, Key4hepPackage):
       # this should point to share/ by key4hep convention
       #  but we want to make it work with the tutorials
       spack_env.set("FCCANALYSES", self.prefix.python)
+
+    def cmake_args(self):
+        return [
+            self.define('CMAKE_CXX_STANDARD',
+                        self.spec['root'].variants['cxxstd'].value)
+        ]
diff --git a/packages/cepcsw/package.py b/packages/cepcsw/package.py
index 08f17da..653be1e 100644
--- a/packages/cepcsw/package.py
+++ b/packages/cepcsw/package.py
@@ -29,7 +29,7 @@ class Cepcsw(CMakePackage, Key4hepPackage):
           sha256='87bf94536f5fd7fb675ca4eff25277331b7de94ef541f2bd8ea178a5e61fd20d', when="@0.2.1")
 
     depends_on('clhep')
-    depends_on('dd4hep +geant4')
+    depends_on('dd4hep')
     depends_on('edm4hep')
     depends_on('k4fwcore@0.3.0:', when='@0.2:')
     depends_on('k4fwcore@0.2.0', when='@:0.1.99')
